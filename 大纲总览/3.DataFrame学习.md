# Pandas DataFrame 学习

## 1. DataFrame 的创建方式

### 1.1 通过多个 Series 创建
- `pd.DataFrame({"第1列": s1, "第2列": s2})`

### 1.2 通过字典创建
- 嵌套列表：`{"name":[...], "age":[...], "score":[...]}`
- 自定义 `index`
- 指定 `columns` 顺序

### 1.3 使用 DataFrame 构造器重建数据
- `pd.DataFrame(data, index=..., columns=...)`

---

## 2. DataFrame 的属性
- `index`：行索引  
- `columns`：列标签  
- `values`：二维 ndarray  
- `ndim`：维度  
- `shape`：形状 `(行, 列)`  
- `size`：元素个数  
- `dtypes`：每列的数据类型  

---

## 3. 基本操作

### 3.1 行列转置
- `df.T`

### 3.2 基于 loc / iloc / at / iat 的索引

#### 按行
- `df.loc[4]`
- `df.iloc[3]`

#### 按列
- `df.loc[:, "name"]`
- `df.iloc[:, 0]`

#### 单个元素
- `df.at[3, "score"]`
- `df.iat[2, 1]`

#### 多列选择
- `df["name"]`
- `df[["name"]]`
- `df[["name", "score"]]`

### 3.3 查看部分数据
- `head(n)`
- `tail(n)`

### 3.4 布尔索引
- `df[df.score > 70]`
- `df[(df.score > 70) & (df.age < 20)]`

### 3.5 随机抽样
- `df.sample(n)`

---

## 4. 常见函数与统计分析

### 4.1 判断类
- `isin()`
- `isna()`
- `duplicated(subset=...)`

### 4.2 聚合函数
- `sum`, `max`, `min`
- `mean`, `median`, `mode`
- `std`, `var`
- `quantile`

### 4.3 描述信息
- `describe()`
- `count()`（非缺失值数量）

### 4.4 数据分布与去重
- `value_counts()`
- `drop_duplicates()`
- `unique()`（按列唯一值）

### 4.5 累积函数
- `cumsum()`
- `cummin(axis=0)`

---

## 5. 排序操作

### 5.1 根据索引排序
- `df.sort_index(ascending=False)`

### 5.2 根据列排序
- `df.sort_values(by="score")`

### 5.3 多列排序
- `df.sort_values(by=["score", "age"], ascending=[True, False])`

### 5.4 最大/最小 n 行
- `df.nlargest(2, columns=["score", "age"])`
- `df.nsmallest(2, columns=["score", "age"])`

---

## 6. 数据变形（非常重要）

### 6.1 宽表 ↔ 长表
- 宽 → 长：`pd.melt(id_vars=..., var_name="科目", value_name="分数")`
- 长 → 宽：`pd.pivot(index=["ID","name"], columns="科目", values="分数")`

### 6.2 分列
- `df["name"].str.split(" ", expand=True)`

### 6.3 字符串处理
- `capitalize()`
- `str.extract()`（支持正则）

### 6.4 CSV 数据加载与处理
- `pd.read_csv(...)`
- 血压分割：`str.split("/", expand=True)`
- 提取 email 域名：`str.extract(r"@(.+)")`

---

## 7. 综合案例（文件中的所有练习）

### 7.1 学生成绩分析
- 计算总分 / 平均分（`sum(axis=1)`, `mean(axis=1)`）
- 多条件筛选
- 排序取前 3（`sort_values` / `nlargest`）

### 7.2 销售数据分析
- 新增列：单价 × 数量
- 找最大销售额
- 降序排序

### 7.3 电商用户行为分析
- 总消费金额 = 单价 × 数量
- 找出最大消费者
- 平均消费金额（`round`）
- 电子产品总购买数量

### 7.4 每类案例的小结

---

## 8. 日期处理
- `pd.date_range()`
- `freq="MS"`（月初频率）
- `freq="h"`（小时级）
