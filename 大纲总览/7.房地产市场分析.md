# 房地产市场分析（Python 数据分析实战）

## 1. 项目初始化

### 1.1 导入库
- `numpy / pandas / seaborn / matplotlib`
- 中文字体：`rcParams` 设置

### 1.2 导入数据
- `df = pd.read_csv("data/house_sales.csv")`

---

## 2. 数据概览（EDA）

### 2.1 基本信息
- 记录数：`len(df)`
- 字段数：`len(df.columns)`
- `df.head()`
- `df.info()`

### 2.2 清洗准备
- 删除无用列（`origin_url`）
- 检查缺失值：`df.isna().sum()`
- 检查重复：`df.duplicated().sum()`

---

## 3. 数据清洗

### 3.1 缺失值处理
- `df.dropna(inplace=True)`

### 3.2 重复值处理
- `df.drop_duplicates(inplace=True)`

### 3.3 数据类型转换
- `area`：去掉 “㎡” → float  
- `price`：去掉 “万” → float  
- `unit`：去掉 “元/㎡” → float  
- `toward`：转为 `category`  
- `year`：去掉 “年建” → int  
- `building_age = 2025 - year`

### 3.4 异常值处理
- `area` 限制：20㎡ ~ 600㎡  
- `price`：IQR 法过滤极端值

---

## 4. 新特征构造

### 4.1 地区提取
- `district = address.split("-")[0]`

### 4.2 楼层类型（两种方式）
- `floor_type`：原始楼层文字  
- `floor_type2`：按 “低/中/高” 映射

### 4.3 直辖市标记
- `zxs = 1 if city in ["北京","上海","天津","重庆"]`

### 4.4 户型拆解
- `bedrooms`：从 rooms 提取 “几室”  
- `livingrooms`：提取 “几厅”

### 4.5 楼龄计算
- `building_age = 2025 - year`

### 4.6 价格分段（分箱）
- `pd.cut(price, bins=4, labels=["低价","中价","高价","豪华"])`

---

## 5. 关键问题分析（A1 ~ A6）

### A1. 哪些变量最影响房价？
- 特征相关性分析：`df.corr(numeric_only=True)`
- 对 price 的影响排序
- 热力图：`sns.heatmap()`

### A2. 全国房价总体分布？
- `df.describe()`
- 直方图：`histplot` + KDE

### A3. 哪些城市房价最高？
- `groupby("city")`: mean / median / count  
- 提取 TOP10 城市
- 不同城市房价箱线图

### A4. 高价房具有什么特征？
- `price_labels` 分段
- 分组统计：`area / building_age / unit / zxs`
- 柱状图 / 箱线图

### A5. 哪种户型最受欢迎？三室比两室贵多少？
- `room_count = rooms` 提取 “几室”
- `groupby(room_count)`
  - 均价  
  - 单价  
  - 面积中位数
- 可视化：箱线图 / 散点图 / barplot

### A6. 朝向是否影响房价？
- `groupby("toward")`: price mean / median
- 朝向溢价箱线图

---

## 6. 分析方法总结（关键知识点）

- **描述性统计**：`mean / median / std / quantile`
- **异常值识别**：IQR
- **价格分箱**：`pd.cut`
- **分组统计**：`groupby + agg`
- **多维可视化**：箱线图 / 散点图 / 热力图
- **文本特征提取**：`str.split / extract / lambda`
- **城市级 vs 户型级 vs 朝向级** 多维分析
